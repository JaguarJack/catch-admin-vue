<template>
  <layout title="‰∏™‰∫∫ËÆæÁΩÆ">
    <template v-slot:body>
      <el-form :model="formData" label-width="120px" ref="form" class="pr-4 w-full bg-white dark:bg-regal-dark pt-5">
        <div class="flex flex-col mx-auto w-2/3">
          <el-form-item
            label="ÊòµÁß∞"
            prop="personal_nickname"
            :rules="[
              {
                required: true,
                message: 'ÊòµÁß∞ÂêçÁß∞ÂøÖÈ°ªÂ°´ÂÜô',
              },
            ]"
          >
            <el-input v-model="formData.personal_nickname" clearable placeholder="ÊòµÁß∞" />
          </el-form-item>
          <el-form-item label="Ëã±ÊñáÊòµÁß∞" prop="personal_en_nickname">
            <el-input v-model="formData.personal_en_nickname" clearable placeholder="Ëã±ÊñáÊòµÁß∞" />
          </el-form-item>
          <el-form-item label="ü§≥ ‰∏™‰∫∫Â§¥ÂÉè" prop="personal_avatar">
            <Upload class="w-28" action="upload/image" :show-file-list="false" name="image" :onSuccess="uploadSuccess">
              <div class="flex flex-col">
                <img :src="formData.personal_avatar" v-if="formData.personal_avatar" />
                <el-button type="primary" v-else>ÈÄâÊã©Â§¥ÂÉè</el-button>
              </div>
            </Upload>
          </el-form-item>

          <el-form-item
            label="üè† ‰∏™‰∫∫‰∏ªÈ°µ"
            prop="personal_homepage"
            :rules="[
              {
                type: 'url',
                message: '‰∏™‰∫∫‰∏ªÈ°µÈìæÊé•‰∏çÁ¨¶ÂêàËßÑÂàô',
              },
            ]"
          >
            <el-input v-model="formData.person_homepage" clearable placeholder="‰∏™‰∫∫‰∏ªÈ°µ" />
          </el-form-item>

          <el-form-item label="üìÆ ÈÇÆÁÆ±" prop="personal_email">
            <el-input v-model="formData.personal_email" clearable placeholder="ÈÇÆÁÆ±" />
          </el-form-item>

          <el-form-item label="‰∏™‰∫∫ÁÆÄ‰ªã" prop="personal_description">
            <el-input v-model="formData.personal_description" clearable type="textarea" placeholder="‰∏™‰∫∫ÁÆÄ‰ªã" />
          </el-form-item>

          <el-form-item label="Á§æ‰∫§">
            <div class="flex flex-col gap-y-2 w-full">
              <el-input
                v-model="formData.personal_github"
                clearable
                placeholder="GitHub‰∏ªÈ°µ"
                :rules="[
                  {
                    type: 'url',
                    message: 'GitHub‰∏ªÈ°µÈìæÊé•‰∏çÁ¨¶ÂêàËßÑÂàô',
                  },
                ]"
              />
              <el-input
                v-model="formData.personal_twitter"
                clearable
                placeholder="Êé®Áâπ‰∏ªÈ°µ"
                :rules="[
                  {
                    type: 'url',
                    message: 'Êé®Áâπ‰∏ªÈ°µÈìæÊé•‰∏çÁ¨¶ÂêàËßÑÂàô',
                  },
                ]"
              />
              <el-input
                v-model="formData.personal_linkedin"
                clearable
                placeholder="linkedin ‰∏ªÈ°µ"
                :rules="[
                  {
                    type: 'url',
                    message: 'linkedin ‰∏ªÈ°µÈìæÊé•‰∏çÁ¨¶ÂêàËßÑÂàô',
                  },
                ]"
              />
              <el-input
                v-model="formData.personal_weibo"
                clearable
                placeholder="ÂæÆÂçö‰∏ªÈ°µ"
                :rules="[
                  {
                    type: 'url',
                    message: 'ÂæÆÂçö‰∏ªÈ°µÈìæÊé•‰∏çÁ¨¶ÂêàËßÑÂàô',
                  },
                ]"
              />
              <el-input
                v-model="formData.personal_google"
                clearable
                placeholder="G+‰∏ªÈ°µ"
                :rules="[
                  {
                    type: 'url',
                    message: 'G+‰∏ªÈ°µÈìæÊé•‰∏çÁ¨¶ÂêàËßÑÂàô',
                  },
                ]"
              />
              <el-input
                v-model="formData.personal_reddit"
                clearable
                placeholder="reddit‰∏ªÈ°µ"
                :rules="[
                  {
                    type: 'url',
                    message: 'reddit‰∏ªÈ°µÈìæÊé•‰∏çÁ¨¶ÂêàËßÑÂàô',
                  },
                ]"
              />
            </div>
          </el-form-item>

          <el-form-item label="ÊâÄÂú®ÂüéÂ∏Ç" prop="personal_city">
            <el-input v-model="formData.personal_city" clearable placeholder="ÊâÄÂú®ÂüéÂ∏Ç" />
          </el-form-item>

          <el-form-item label="Áä∂ÊÄÅ" prop="personal_status">
            <el-input v-model="formData.personal_status" clearable placeholder="‰∏ÄÂè•ËØùÊèèËø∞ÂΩìÂâçÁä∂ÊÄÅ" />
          </el-form-item>
        </div>
        <div class="bg-white dark:bg-regal-dark flex justify-center mb-3">
          <el-button type="primary" @click="submitForm(form)" class="ml-5 w-[10rem]">‰øù Â≠ò</el-button>
        </div>
      </el-form>
    </template>
  </layout>
</template>

<script setup lang="ts">
import Layout from '../layout.vue'
import { useCreate } from '@/composables/curd/useCreate'
import http from '@/support/http'
const api = '/cms/setting'

const { formData, form, loading, submitForm } = useCreate(api)

http.get('cms/setting', { key: 'personal_*' }).then(r => {
  formData.value = r.data.data
})

const uploadSuccess = r => {
  formData.value.site_logo = r.data.path
}
</script>
